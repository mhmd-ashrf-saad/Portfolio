<div class="project-editor">
  <h2>{{ isEditing ? 'Edit Project' : 'Add New Project' }}</h2>

  @if (successMessage) {
    <div class="alert alert-success">{{ successMessage }}</div>
  }

  @if (errorMessage) {
    <div class="alert alert-danger">{{ errorMessage }}</div>
  }

  <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="title">Project Title</label>
      <input 
        type="text" 
        id="title" 
        formControlName="title" 
        class="form-control"
        [class.is-invalid]="formSubmitted && projectForm.get('title')?.invalid"
      >
      @if (formSubmitted && projectForm.get('title')?.invalid) {
        <div class="error-message">Title is required</div>
      }
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea 
        id="description" 
        formControlName="description" 
        class="form-control"
        rows="4"
        [class.is-invalid]="formSubmitted && projectForm.get('description')?.invalid"
      ></textarea>
      @if (formSubmitted && projectForm.get('description')?.invalid) {
        <div class="error-message">Description is required</div>
      }
    </div>

    <div class="form-group">
      <label for="image">Image Path</label>
      <input 
        type="text" 
        id="image" 
        formControlName="image" 
        class="form-control"
        placeholder="projects/image-name.jpg"
        [class.is-invalid]="formSubmitted && projectForm.get('image')?.invalid"
      >
      @if (formSubmitted && projectForm.get('image')?.invalid) {
        <div class="error-message">Image path is required</div>
      }
    </div>

    <div class="form-group">
      <label for="technologies">Technologies (comma-separated)</label>
      <input 
        type="text" 
        id="technologies" 
        formControlName="technologies" 
        class="form-control"
        placeholder="Angular, TypeScript, Bootstrap"
        [class.is-invalid]="formSubmitted && projectForm.get('technologies')?.invalid"
      >
      @if (formSubmitted && projectForm.get('technologies')?.invalid) {
        <div class="error-message">At least one technology is required</div>
      }
    </div>

    <div class="form-group">
      <label for="liveUrl">Live URL</label>
      <input 
        type="text" 
        id="liveUrl" 
        formControlName="liveUrl" 
        class="form-control"
        [class.is-invalid]="formSubmitted && projectForm.get('liveUrl')?.invalid"
      >
      @if (formSubmitted && projectForm.get('liveUrl')?.invalid) {
        <div class="error-message">Live URL is required</div>
      }
    </div>

    <div class="form-group">
      <label for="githubUrl">GitHub URL</label>
      <input 
        type="text" 
        id="githubUrl" 
        formControlName="githubUrl" 
        class="form-control"
        [class.is-invalid]="formSubmitted && projectForm.get('githubUrl')?.invalid"
      >
      @if (formSubmitted && projectForm.get('githubUrl')?.invalid) {
        <div class="error-message">GitHub URL is required</div>
      }
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        {{ isEditing ? 'Update Project' : 'Add Project' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">
        Cancel
      </button>
    </div>
  </form>

  <div class="projects-list">
    <h3>Existing Projects</h3>
    
    @if (projects.length === 0) {
      <p class="no-projects">No projects found.</p>
    } @else {
      <div class="table-responsive">
        <table class="projects-table">
          <thead>
            <tr>
              <th>Title</th>
              <th>Technologies</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (project of projects; track project.id) {
              <tr>
                <td>{{ project.title }}</td>
                <td>
                  <div class="tech-tags">
                    @for (tech of project.technologies; track tech) {
                      <span class="tech-tag">{{ tech }}</span>
                    }
                  </div>
                </td>
                <td class="actions">
                  <button class="btn-icon edit" (click)="editProject(project)" title="Edit">
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button class="btn-icon delete" (click)="deleteProject(project.id)" title="Delete">
                    <i class="bi bi-trash"></i>
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </div>
</div>